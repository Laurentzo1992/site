{% extends "base.html" %}
{% load static %}

      <!-- Page Header-->
      {% block main %}
      {% block Carousel %}
      <section>
          <!-- Swiper-->
          <div class="swiper-container swiper-slider swiper-slider-1" data-loop="false" data-autoplay="5000" data-simulate-touch="false">
              <div class="swiper-wrapper">
                  {% for slide in slides %}
                  <div class="swiper-slide" style="background-image: url('{{slide.image.url}}');">
                      <div class="swiper-slide-caption context-dark">
                          <div class="container">
                              <div class="row">
                                  <div class="col-12 col-md-10 col-lg-7">
                                      <div class="box-animation">
                                          <h6 data-caption-animate="slideInLeft" data-caption-delay="150">{{slide.titre1}}</h6>
                                          <h2 data-caption-animate="slideInLeft" data-caption-delay="300">{{slide.titre2}} <span class="text-italic font-weight-bold text-white">{{slide.titre3}}</span></h2>
                                          <div class="button-block" data-caption-animate="fadeInUp" data-caption-delay="450">
                                              <a class="btn btn-primary" href="{% url 'login' %}">Connexion</a>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          </div>
                      </div>
                  </div>
                  {% endfor %}
              </div>
              <div class="swiper-pagination"></div>
          </div>
      </section>
      
      {% endblock Carousel %}
      <!-- A Few Words About Me-->
      {% block content %}
      
      <section class="section section-lg">
        <div class="container">
            <div class="row row-50 justify-content-center justify-content-lg-between">
                <div class="col-12">
                    <h1 class="h-custom-1 f1" style="color:#0080ff;">2clic? </h1>
                </div>
                <div class="col-12 col-md-6 mb-4 mb-md-0">
                    <p style="text-align: justify;">{{debut.about1}}.</p>
                    <a class="btn" href="{% url 'about' %}"><span style="color:#0080ff;">Lire plus</span></a>
                </div>
                <div class="col-12 col-md-6" data-wow-delay=".4s">
                    <img class="img-fluid" src="{% static 'media/images/equipe.svg' %}" alt="">
                </div>
            </div>
        </div>
      </section>
    
      <!-- Featured-->

      <div class="row mx-3 mb-3">
          <div class="col-sm-6 text-center">
            <div class="card">
              <div class="card-body">
                <p style="color:#0080ff;">Je suis jeune, je trouve un mentor</p>
                <a href="{% url 'login' %}" class="btn btn-primary" style="background-color:#0080ff;">Je m'inscris</a>
              </div>
            </div>
          </div>
  
          <div class="col-sm-6 text-center">
            <div class="card">
              <div class="card-body">
                <p style="color:#0080ff;">Je suis un professionnel, j’accompagne un jeune</p>
                <a href="{% url 'login' %}" class="btn btn-primary" style="background-color:#0080ff;">Je m'inscris</a>
              </div>
            </div>
          </div>
      </div>

       <!-- Temoignage -->

      <section class="section section-lg bg-default text-center">
        <div class="container222">
            <h6 class="wow fadeIn" style="color:#0080ff;">Nos Activités </h6>
            {% for activite in activites %}
            <div class="activite">
                {% if activite.image_des %}
                <img src="{{ activite.image_des.url }}" alt="{{ activite.titre }}">
                {% endif %}
                <h4>{{ activite.titre }}</h4>
                <p>{{ activite.description }}</p>
                <small>Créé le : {{ activite.created }}</small>
            </div>
            {% endfor %}
        </div>
      </section>


      <!-- Temoignage -->
       
      <!-- Temoignage -->
      <section class="section section-lg bg-default text-center">
        <div class="container">
          <h6 class="wow fadeIn" style="color:#0080ff;">Témoignage</h6>
            <div class="row">
                {% for data in temoignages %}
                <div class="col-12 col-sm-6 col-md-4 col-lg-3 mb-4">
                    <div class="card h-100 shadow-lg p-3 mb-5" style="color:#0080ff;">
                        {% if data.photo %}
                        <img src="{{data.photo.url}}" class="mx-auto d-block rounded-circle" alt="photo illustrative">
                        {% else %}
                        <img class="w-25 mx-auto d-block rounded-circle" src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="photo illustrative">
                        {% endif %}
                        <div class="card-body">
                            <h5 class="card-title">{{data.nom_prenom}}</h5>
                            <p class="card-text">{{data.description}}</p>
                        </div>
                    </div>
                </div>
                {% empty %}
                <div class="col-12">
                    <p class="text-center">Pas de données</p>
                </div>
                {% endfor %}
            </div>
        </div>
      </section>



      <!-- Partenaire -->
      <section class="section section-lg bg-default text-center">
        <div class="container">
            <h6 class="wow fadeIn" style="color:#0080ff;">Ils nous font confiance</h6>
            <div class="row justify-content-center">
                {% for ressource in partenariats %}
                <div class="col-sm-10 col-md-4 col-lg-4 wow fadeIn mb-4">
                            <a class="post-light context-dark" href="{{ressource.ressource.url}}" style="background-image: url({{ressource.patenaire_image.url}});">
                                <div class="post-light-inner">
                                    <div class="badge" style="color:#0080ff;">{{ressource.nom}}</div>
                                    <div class="post-light-main">
                                    </div>
                                </div>
                            </a>
                </div>
                {% endfor %}
            </div>
        </div>
      </section>



      <!-- Statistique -->
          <section class="section section-lg bg-default text-center">
              <div class="container">
                  <h6 class="wow fadeIn" style="color:#0080ff;">Statistique</h6>
                  <div class="row justify-content-center">
                      <div class="col-12 col-md-10 col-lg-8">
                          <div class="chart-container" style="position: relative; height:60vh; width:100%">
                              <canvas id="myChart"></canvas>
                          </div>
                          <h6 class="text-secondary font-italic font-weight-bold">Rapport des utilisateurs par profil</h6>
                      </div>
                  </div>
              </div>
          </section>
      

      <!-- RGPH-->
      <section class="section section-lg bg-default">
        <div class="container">
            <div class="text-center">
                <button id="toggleButton" type="button" class="btn btn-warning">
                    Règlement Générale sur la Protection des données Personnelles
                </button>
            </div>
            <div class="row row-50 justify-content-center justify-content-xl-between flex-lg-row-reverse" id="rgpd" style="display: none;">
                <div class="col-md-11 col-lg-12">
                    <div class="accordion accordion-flush" id="accordionFlushExample">
                        {% for data in politiques %}
                        <div class="accordion-item">
                            <h2 class="accordion-header" id="flush-heading{{data.id}}">
                                <button class="accordion-button collapsed text-white" style="background-color:#0080ff;" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapse{{data.id}}" aria-expanded="false" aria-controls="flush-collapse{{data.id}}">
                                    {{ data.titre }}
                                </button>
                            </h2>
                            <div id="flush-collapse{{data.id}}" class="accordion-collapse collapse" aria-labelledby="flush-heading{{data.id}}" data-bs-parent="#accordionFlushExample">
                                <div class="accordion-body">{{ data.description }}</div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </section>    
    
      {% endblock content %}

            
      {% for message in messages %}
      <script src="{% static 'js/sweetalert.min.js' %}"></script>
      {% if message.tags == 'error' %}
      <script>
          var m = "{{ message }}";
          swal("Réfusé!", m, "error");
      </script>
      {% elif message.tags == 'success' %}
      <script>
          var m = "{{ message }}";
          swal("Bienvenue!", m, "success");
      </script>
      {% elif message.tags == 'warning' %}
      <script>
          var m = "{{ message }}";
          swal("A bientôt!", m, "warning");
      </script>
      {% endif %}

      {% endfor%}


      <script>
          document.addEventListener("DOMContentLoaded", function() {
            const toggleButton = document.getElementById("toggleButton");
            const rgpdSection = document.getElementById("rgpd");
        
            toggleButton.addEventListener("click", function() {
                if (rgpdSection.style.display === "none" || rgpdSection.style.display === "") {
                    rgpdSection.style.display = "block";
                } else {
                    rgpdSection.style.display = "none";
                }
            });
        });
      </script>



      <script>
        var ctx = document.getElementById('myChart').getContext('2d');
        var levels = {{ levels|safe }};
        var counts = {{ counts|safe }};

        var myChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: levels,
                datasets: [{
                    label: 'Rapport des utilisateurs',
                    data: counts,
                    backgroundColor: 'rgb(0, 128, 255)',
                    borderColor: 'rgb(160, 128, 25)',
                    borderWidth: 5
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                }
            }
        });
    </script>

    {% endblock main %}
     
    
    
   